# Vercel éƒ¨ç½²æ­¥éª¤ï¼Œé—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ¡ˆå›é¡¾

æœ¬æ–‡æ¡£è¯¦ç»†è®°å½•äº†å°† Flask ç¬”è®°åº”ç”¨éƒ¨ç½²åˆ° Vercel å¹³å°çš„æ“ä½œæ­¥éª¤å’Œéƒ¨ç½²æ—¶é‡åˆ°çš„ä¸»è¦é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Œä¾›åç»­å‚è€ƒã€‚

---

## ç›®å½•
- [Vercel éƒ¨ç½²æ­¥éª¤ï¼Œé—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ¡ˆå›é¡¾](#vercel-éƒ¨ç½²æ­¥éª¤é—®é¢˜æ€»ç»“ä¸è§£å†³æ–¹æ¡ˆå›é¡¾)
  - [ç›®å½•](#ç›®å½•)
  - [1. æ·»åŠ æ–°åŠŸèƒ½æ­¥éª¤](#1-æ·»åŠ æ–°åŠŸèƒ½æ­¥éª¤)
    - [1. âœ… åˆ†æé¡¹ç›®ç»“æ„å’Œç°æœ‰ä»£ç ](#1--åˆ†æé¡¹ç›®ç»“æ„å’Œç°æœ‰ä»£ç )
    - [2. âœ… ä¿®æ”¹å‰ç«¯ç•Œé¢æ·»åŠ æå–ä¿¡æ¯æŒ‰é’®](#2--ä¿®æ”¹å‰ç«¯ç•Œé¢æ·»åŠ æå–ä¿¡æ¯æŒ‰é’®)
    - [3. âœ… åˆ›å»ºåç«¯APIæ¥å£](#3--åˆ›å»ºåç«¯apiæ¥å£)
    - [4. âœ… é›†æˆGitHubå¤§è¯­è¨€æ¨¡å‹API](#4--é›†æˆgithubå¤§è¯­è¨€æ¨¡å‹api)
    - [5. âœ… æ›´æ–°ä¾èµ–å’Œé…ç½®](#5--æ›´æ–°ä¾èµ–å’Œé…ç½®)
    - [6. âœ… å®ç°å‰ç«¯äº¤äº’é€»è¾‘](#6--å®ç°å‰ç«¯äº¤äº’é€»è¾‘)
    - [7. âœ… æ·»åŠ ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨åŠŸèƒ½](#7--æ·»åŠ ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨åŠŸèƒ½)
    - [8. âœ… å¢å¼ºå‰ç«¯ç”¨æˆ·ä½“éªŒ](#8--å¢å¼ºå‰ç«¯ç”¨æˆ·ä½“éªŒ)
    - [9. âœ… å‰ç«¯é¡µé¢ä¼˜åŒ–](#9--å‰ç«¯é¡µé¢ä¼˜åŒ–)
    - [10. âœ… Verceläº‘éƒ¨ç½²å‡†å¤‡](#10--verceläº‘éƒ¨ç½²å‡†å¤‡)
  - [ğŸ¯ åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
    - [AIä¿¡æ¯æå–åŠŸèƒ½](#aiä¿¡æ¯æå–åŠŸèƒ½)
    - [æŠ€æœ¯å®ç°](#æŠ€æœ¯å®ç°)
  - [ğŸ”§ é…ç½®è¦æ±‚](#-é…ç½®è¦æ±‚)
    - [ç¯å¢ƒå˜é‡](#ç¯å¢ƒå˜é‡)
    - [APIç«¯ç‚¹](#apiç«¯ç‚¹)
  - [ğŸ“š ä½¿ç”¨è¯´æ˜](#-ä½¿ç”¨è¯´æ˜)
  - [ğŸ” æµ‹è¯•çŠ¶æ€](#-æµ‹è¯•çŠ¶æ€)
  - [ğŸ“ æ³¨æ„äº‹é¡¹](#-æ³¨æ„äº‹é¡¹)
  - [1. Vercel é…ç½®æ–‡ä»¶é—®é¢˜](#1-vercel-é…ç½®æ–‡ä»¶é—®é¢˜)
    - [é—®é¢˜æè¿°](#é—®é¢˜æè¿°)
    - [æ ¹æœ¬åŸå› ](#æ ¹æœ¬åŸå› )
    - [è§£å†³æ–¹æ¡ˆ](#è§£å†³æ–¹æ¡ˆ)
  - [2. Vercel ç¯å¢ƒå˜é‡çš„ Secret å¼•ç”¨](#2-vercel-ç¯å¢ƒå˜é‡çš„-secret-å¼•ç”¨)
    - [é—®é¢˜æè¿°](#é—®é¢˜æè¿°-1)
    - [æ ¹æœ¬åŸå› ](#æ ¹æœ¬åŸå› -1)
    - [è§£å†³æ–¹æ¡ˆ](#è§£å†³æ–¹æ¡ˆ-1)
  - [3. Python ç‰ˆæœ¬å’Œä¾èµ–é—®é¢˜](#3-python-ç‰ˆæœ¬å’Œä¾èµ–é—®é¢˜)
    - [é—®é¢˜æè¿°](#é—®é¢˜æè¿°-2)
    - [æ ¹æœ¬åŸå› ](#æ ¹æœ¬åŸå› -2)
    - [è§£å†³æ–¹æ¡ˆ](#è§£å†³æ–¹æ¡ˆ-2)
  - [4. Flask `@before_first_request` è£…é¥°å™¨åºŸå¼ƒ](#4-flask-before_first_request-è£…é¥°å™¨åºŸå¼ƒ)
    - [é—®é¢˜æè¿°](#é—®é¢˜æè¿°-3)
    - [æ ¹æœ¬åŸå› ](#æ ¹æœ¬åŸå› -3)
    - [è§£å†³æ–¹æ¡ˆ](#è§£å†³æ–¹æ¡ˆ-3)
  - [5. æ•°æ®åº“ä»æœ¬åœ° SQLite åˆ‡æ¢åˆ°è¿œç¨‹ PostgreSQL](#5-æ•°æ®åº“ä»æœ¬åœ°-sqlite-åˆ‡æ¢åˆ°è¿œç¨‹-postgresql)
    - [é—®é¢˜æè¿°](#é—®é¢˜æè¿°-4)
    - [æ ¹æœ¬åŸå› ](#æ ¹æœ¬åŸå› -4)
    - [è§£å†³æ–¹æ¡ˆ](#è§£å†³æ–¹æ¡ˆ-4)
  - [6. `api/index.py` å…¥å£æ–‡ä»¶çš„æ¼”è¿›](#6-apiindexpy-å…¥å£æ–‡ä»¶çš„æ¼”è¿›)
    - [é—®é¢˜æè¿°](#é—®é¢˜æè¿°-5)
    - [æ ¹æœ¬åŸå› åˆ†æ](#æ ¹æœ¬åŸå› åˆ†æ)
    - [è§£å†³æ–¹æ¡ˆæ¼”è¿›è¿‡ç¨‹](#è§£å†³æ–¹æ¡ˆæ¼”è¿›è¿‡ç¨‹)
      - [é˜¶æ®µ 1ï¼šåˆå§‹å°è¯•ï¼ˆå¤±è´¥ï¼‰](#é˜¶æ®µ-1åˆå§‹å°è¯•å¤±è´¥)
      - [é˜¶æ®µ 2ï¼šå®ç°ä»£ç†ç±»ï¼ˆéƒ¨åˆ†æˆåŠŸï¼‰](#é˜¶æ®µ-2å®ç°ä»£ç†ç±»éƒ¨åˆ†æˆåŠŸ)
      - [é˜¶æ®µ 3ï¼šæœ€ç»ˆæ–¹æ¡ˆï¼ˆæˆåŠŸï¼‰âœ…](#é˜¶æ®µ-3æœ€ç»ˆæ–¹æ¡ˆæˆåŠŸ)
    - [å…³é”®è¦ç‚¹æ€»ç»“](#å…³é”®è¦ç‚¹æ€»ç»“)
  - [7. OpenAI ä¾èµ–ç¼ºå¤±é—®é¢˜](#7-openai-ä¾èµ–ç¼ºå¤±é—®é¢˜)
    - [é—®é¢˜æè¿°](#é—®é¢˜æè¿°-6)
    - [æ ¹æœ¬åŸå› ](#æ ¹æœ¬åŸå› -5)
    - [è§£å†³æ–¹æ¡ˆ](#è§£å†³æ–¹æ¡ˆ-5)
    - [å…³é”®è¦ç‚¹](#å…³é”®è¦ç‚¹)
  - [æ€»ç»“ä¸æœ€ä½³å®è·µ](#æ€»ç»“ä¸æœ€ä½³å®è·µ)
    - [æ ¸å¿ƒç»éªŒ](#æ ¸å¿ƒç»éªŒ)
    - [æ¨èå·¥ä½œæµ](#æ¨èå·¥ä½œæµ)
    - [å¸¸è§é”™è¯¯å¿«é€Ÿè¯Šæ–­è¡¨](#å¸¸è§é”™è¯¯å¿«é€Ÿè¯Šæ–­è¡¨)
    - [éƒ¨ç½²æ£€æŸ¥æ¸…å•](#éƒ¨ç½²æ£€æŸ¥æ¸…å•)

---
## 1. æ·»åŠ æ–°åŠŸèƒ½æ­¥éª¤
### 1. âœ… åˆ†æé¡¹ç›®ç»“æ„å’Œç°æœ‰ä»£ç 
- å·²åˆ†æä¸»è¦æ–‡ä»¶ï¼šmain.pyã€models/note.pyã€routes/note.pyã€static/index.html
- äº†è§£äº†Flaskåº”ç”¨æ¶æ„ã€SQLAlchemyæ•°æ®æ¨¡å‹å’Œå‰ç«¯ç•Œé¢ç»“æ„
- ç¡®è®¤äº†ç°æœ‰çš„APIç«¯ç‚¹å’Œå‰ç«¯åŠŸèƒ½

### 2. âœ… ä¿®æ”¹å‰ç«¯ç•Œé¢æ·»åŠ æå–ä¿¡æ¯æŒ‰é’®
- åœ¨CSSä¸­æ·»åŠ äº†`.btn-extract`æ ·å¼ï¼Œè“è‰²èƒŒæ™¯ï¼ŒåŒ…å«ğŸ§  emojiä½œä¸ºlogo
- åœ¨ç¼–è¾‘å™¨æ“ä½œåŒºåŸŸæ·»åŠ äº†"æå–ä¿¡æ¯"æŒ‰é’®
- æ·»åŠ äº†æŒ‰é’®çš„hoveræ•ˆæœå’Œç¦ç”¨çŠ¶æ€æ ·å¼
- `src/static/index.html` æ–°å¢å³ä¾§ AI è¾…åŠ©é¢æ¿ï¼šç¿»è¯‘ç›®æ ‡è¯­è¨€ä¸‹æ‹‰æ¡†ã€ç¿»è¯‘æŒ‰é’®ã€å¹¶æ’å±•ç¤ºåŸæ–‡ä¸è¯‘æ–‡ã€‚

### 3. âœ… åˆ›å»ºåç«¯APIæ¥å£
- åœ¨`src/routes/note.py`ä¸­æ·»åŠ äº†æ–°çš„APIç«¯ç‚¹`/api/notes/extract-info`
- å®ç°äº†POSTæ–¹æ³•æ¥å¤„ç†ä¿¡æ¯æå–è¯·æ±‚
- æ·»åŠ äº†é”™è¯¯å¤„ç†å’Œè¾“å…¥éªŒè¯

### 4. âœ… é›†æˆGitHubå¤§è¯­è¨€æ¨¡å‹API
- åˆ›å»ºäº†`src/services/`ç›®å½•å’ŒAIæœåŠ¡æ¨¡å—
- å®ç°äº†`GitHubAIService`ç±»æ¥è°ƒç”¨GitHub Models API
- é…ç½®äº†ä¸“ä¸šçš„æç¤ºè¯æ¥æå–æ–‡æ¡£å…³é”®ä¿¡æ¯
- å®ç°äº†å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œè¶…æ—¶æ§åˆ¶

### 5. âœ… æ›´æ–°ä¾èµ–å’Œé…ç½®
- åœ¨`requirements.txt`ä¸­æ·»åŠ äº†`requests==2.31.0`ä¾èµ–
- åˆ›å»ºäº†`.env.example`æ–‡ä»¶æä¾›ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹
- æ›´æ–°äº†README.mdåŒ…å«æ–°åŠŸèƒ½è¯´æ˜å’Œé…ç½®æŒ‡å—

### 6. âœ… å®ç°å‰ç«¯äº¤äº’é€»è¾‘
- æ·»åŠ äº†`extractInformation()`æ–¹æ³•å¤„ç†æŒ‰é’®ç‚¹å‡»äº‹ä»¶
- å®ç°äº†APIè°ƒç”¨å’ŒåŠ è½½çŠ¶æ€ç®¡ç†
- åˆ›å»ºäº†æ¨¡æ€çª—å£æ¥å±•ç¤ºæå–çš„ä¿¡æ¯
- æ·»åŠ äº†å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ

### 7. âœ… æ·»åŠ ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨åŠŸèƒ½
- åœ¨Noteæ•°æ®æ¨¡å‹ä¸­æ·»åŠ äº†`extracted_info`å’Œ`extracted_at`å­—æ®µ
- æ›´æ–°äº†æ•°æ®åº“ç»“æ„æ¥å­˜å‚¨AIæå–çš„ä¿¡æ¯
- ä¿®æ”¹äº†APIç«¯ç‚¹æ¥ä¿å­˜æå–çš„ä¿¡æ¯åˆ°æ•°æ®åº“

### 8. âœ… å¢å¼ºå‰ç«¯ç”¨æˆ·ä½“éªŒ
- æ·»åŠ äº†ç»¿è‰²çš„"æŸ¥çœ‹æå–ä¿¡æ¯"æŒ‰é’®
- åœ¨ç¬”è®°åˆ—è¡¨ä¸­æ·»åŠ ğŸ§ å›¾æ ‡æ ‡è¯†æœ‰æå–ä¿¡æ¯çš„ç¬”è®°
- å®ç°äº†æŸ¥çœ‹å†å²æå–ä¿¡æ¯çš„åŠŸèƒ½
- æ·»åŠ äº†æå–æ—¶é—´æˆ³æ˜¾ç¤º

### 9. âœ… å‰ç«¯é¡µé¢ä¼˜åŒ–
- å®ç°äº†å†…å®¹çª—å£è‡ªé€‚åº”é«˜åº¦ï¼Œæ”¯æŒåŠ¨æ€å¸ƒå±€
- æ·»åŠ äº†ç¬”è®°åˆ—è¡¨åˆ†é¡µåŠŸèƒ½ï¼Œæ¯é¡µæ˜¾ç¤º10æ¡ç¬”è®°
- ä¼˜åŒ–äº†å“åº”å¼è®¾è®¡ï¼Œé€‚é…å„ç§å±å¹•å°ºå¯¸
- æ”¹è¿›äº†ç”¨æˆ·ç•Œé¢çš„ç©ºé—´åˆ©ç”¨ç‡å’Œäº¤äº’ä½“éªŒ

### 10. âœ… Verceläº‘éƒ¨ç½²å‡†å¤‡
- åˆ›å»ºäº†vercel.jsoné…ç½®æ–‡ä»¶å’Œè¿è¡Œæ—¶è®¾ç½®
- æ„å»ºäº†é€‚é…Serverlessç¯å¢ƒçš„APIå…¥å£æ–‡ä»¶
- é›†æˆäº†äº‘æ•°æ®åº“æ”¯æŒ(PostgreSQL/MySQL)
- å‡†å¤‡äº†è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—å’Œé…ç½®æ–‡æ¡£

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### AIä¿¡æ¯æå–åŠŸèƒ½
- **æ™ºèƒ½åˆ†æ**: ä½¿ç”¨GitHub Models APIçš„GPT-4æ¨¡å‹åˆ†ææ–‡æ¡£å†…å®¹
- **ç»“æ„åŒ–è¾“å‡º**: æŒ‰ç…§é¢„å®šä¹‰æ ¼å¼æå–å…³é”®ä¿¡æ¯ï¼š
  - ğŸ“‹ ä¸»è¦å†…å®¹æ‘˜è¦
  - ğŸ”‘ å…³é”®è¦ç‚¹
  - ğŸ“Š é‡è¦æ•°æ®/ä¿¡æ¯
  - ğŸ¯ è¡ŒåŠ¨é¡¹/ä»»åŠ¡
  - ğŸ’¡ å…³é”®æ´å¯Ÿ
- **ä¼˜é›…çš„UI**: è“è‰²æŒ‰é’®é…åˆğŸ§  emojiï¼Œç¬¦åˆç°ä»£è®¾è®¡é£æ ¼
- **å®æ—¶åé¦ˆ**: åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨å’Œè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- **æ¨¡æ€å±•ç¤º**: ç¾è§‚çš„å¼¹çª—å±•ç¤ºAIåˆ†æç»“æœ
- **ä¿¡æ¯æŒä¹…åŒ–**: æå–çš„ä¿¡æ¯è‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“ï¼Œæ”¯æŒéšæ—¶æŸ¥çœ‹
- **å†å²è®°å½•**: ç»¿è‰²"æŸ¥çœ‹æå–ä¿¡æ¯"æŒ‰é’®ï¼Œæ˜¾ç¤ºå†å²æå–ç»“æœå’Œæ—¶é—´æˆ³
- **è§†è§‰æ ‡è¯†**: ç¬”è®°åˆ—è¡¨ä¸­ğŸ§ å›¾æ ‡æ ‡è¯†å·²æå–ä¿¡æ¯çš„ç¬”è®°

### æŠ€æœ¯å®ç°
- **åç«¯**: Flask + SQLAlchemyï¼Œæ–°å¢AIæœåŠ¡æ¨¡å—
- **å‰ç«¯**: åŸç”ŸJavaScriptï¼Œå¼‚æ­¥APIè°ƒç”¨
- **AIé›†æˆ**: GitHub Models APIï¼Œä½¿ç”¨GPT-4æ¨¡å‹
- **å®‰å…¨æ€§**: ç¯å¢ƒå˜é‡é…ç½®ï¼Œè¯·æ±‚éªŒè¯å’Œé”™è¯¯å¤„ç†

## ğŸ”§ é…ç½®è¦æ±‚

### ç¯å¢ƒå˜é‡
éœ€è¦è®¾ç½®GitHub Tokenæ¥è®¿é—®Models APIï¼š
```bash
# Windows
set GITHUB_TOKEN=your_github_token_here

# Linux/Mac  
export GITHUB_TOKEN=your_github_token_here
```

### APIç«¯ç‚¹
æ–°å¢APIç«¯ç‚¹ï¼š`POST /api/notes/extract-info`

è¯·æ±‚æ ¼å¼ï¼š
```json
{
  "note_id": 1,
  "content": "æ–‡æ¡£å†…å®¹..."
}
```

å“åº”æ ¼å¼ï¼š
```json
{
  "success": true,
  "extracted_info": "AIæå–çš„æ ¼å¼åŒ–ä¿¡æ¯"
}
```



## ğŸ“š ä½¿ç”¨è¯´æ˜
1. æ‰“å¼€æˆ–åˆ›å»ºä¸€ä¸ªç¬”è®°
2. ç¡®ä¿ç¬”è®°æœ‰å†…å®¹
3. ç‚¹å‡»è“è‰²çš„"æå–ä¿¡æ¯"æŒ‰é’®
4. ç­‰å¾…AIåˆ†æå®Œæˆ
5. åœ¨å¼¹å‡ºçš„æ¨¡æ€çª—å£ä¸­æŸ¥çœ‹æå–çš„å…³é”®ä¿¡æ¯

## ğŸ” æµ‹è¯•çŠ¶æ€
- âœ… AIæœåŠ¡æ¨¡å—å®ç°å®Œæˆ

## ğŸ“ æ³¨æ„äº‹é¡¹
- éœ€è¦æœ‰æ•ˆçš„GitHub Tokenæ‰èƒ½ä½¿ç”¨AIåŠŸèƒ½
- APIè°ƒç”¨æœ‰é€Ÿç‡é™åˆ¶ï¼Œè¯·åˆç†ä½¿ç”¨
- æ–‡æ¡£å†…å®¹è¿‡é•¿å¯èƒ½å½±å“AIåˆ†æè´¨é‡
- å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ·»åŠ æ›´å¤šçš„å®‰å…¨éªŒè¯

## 1. Vercel é…ç½®æ–‡ä»¶é—®é¢˜

### é—®é¢˜æè¿°
åˆå§‹éƒ¨ç½²æ—¶ï¼Œ`vercel.json` çš„é…ç½®ä¸å½“å¯¼è‡´ï¼š
- åŒæ—¶é…ç½®äº†functionså’Œbuilds

### æ ¹æœ¬åŸå› 
There are two ways to configure Vercel functions in your project: functions or builds. However, only one of them may be used at a time - they cannot be used in conjunction.

### è§£å†³æ–¹æ¡ˆ
ä½¿ç”¨functionsè¿›è¡Œé…ç½®ï¼Œå› ä¸ºå®ƒæ”¯æŒæ›´å¤šåŠŸèƒ½


## 2. Vercel ç¯å¢ƒå˜é‡çš„ Secret å¼•ç”¨

### é—®é¢˜æè¿°
ç¯å¢ƒå˜é‡ "GITHUB_TOKEN" å¼•ç”¨äº† Secret "github_token"ï¼Œä½†è¯¥ Secret ä¸å­˜åœ¨ã€‚Vercel æ”¯æŒç”¨ @secret_name è¯­æ³•åœ¨ vercel.json é‡Œå¼•ç”¨ Secretï¼ˆå¯†é’¥ï¼‰ï¼Œè¿™äº› Secret éœ€è¦ä½ åœ¨ Vercel CLI æˆ– Dashboard é‡Œä¸“é—¨åˆ›å»ºï¼ˆè€Œä¸æ˜¯ç›´æ¥åœ¨ Settings â†’ Environment Variables é‡Œæ·»åŠ ï¼‰ã€‚

### æ ¹æœ¬åŸå› 
- åœ¨ Vercel çš„ Settings â†’ Environment Variables é¡µé¢æ·»åŠ äº† GITHUB_TOKENï¼Œä½†æ²¡æœ‰åˆ›å»º Secret github_tokenï¼Œæ‰€ä»¥ @github_token è¿™ä¸ªå¼•ç”¨æ‰¾ä¸åˆ°ã€‚
- éƒ¨ç½²æ—¶å¦‚æœç¯å¢ƒå˜é‡æœªåœ¨å¯¹åº”ç¯å¢ƒä¸­è®¾ç½®ï¼Œè¿è¡Œæ—¶è¯»å– `os.getenv()` ä¼šè¿”å› `None`ã€‚

### è§£å†³æ–¹æ¡ˆ
1. **åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡**ï¼š
   - è¿›å…¥é¡¹ç›® â†’ Settings â†’ Environment Variables
   - æ·»åŠ é”®å€¼å¯¹ï¼ˆå¦‚ `DATABASE_URL`ï¼‰
   - ä¸º Productionã€Previewã€Development åˆ†åˆ«å‹¾é€‰ç”Ÿæ•ˆç¯å¢ƒ

2. ä¸è¦åœ¨ vercel.json é‡Œå†™ env å­—æ®µï¼Œç›´æ¥åˆ é™¤å³å¯ã€‚


---

## 3. Python ç‰ˆæœ¬å’Œä¾èµ–é—®é¢˜

### é—®é¢˜æè¿°
- éƒ¨ç½²æ—¶æŠ¥é”™ï¼š"No module named 'xxx'"ï¼ˆç¼ºå°‘ä¾èµ–ï¼‰
- Python ç‰ˆæœ¬ä¸åŒ¹é…å¯¼è‡´æŸäº›åŒ…æ— æ³•å®‰è£…æˆ–è¿è¡Œæ—¶æŠ¥é”™

### æ ¹æœ¬åŸå› 
- `requirements.txt` ä¸­æœªåŒ…å«æ‰€æœ‰è¿è¡Œæ—¶éœ€è¦çš„åŒ…
- Vercel é»˜è®¤ä½¿ç”¨çš„ Python ç‰ˆæœ¬å¯èƒ½ä¸æœ¬åœ°å¼€å‘ç¯å¢ƒä¸åŒ
- æŸäº›åŒ…åœ¨ç‰¹å®š Python ç‰ˆæœ¬ä¸‹ä¸å…¼å®¹

### è§£å†³æ–¹æ¡ˆ
1. **ç¡®ä¿ `requirements.txt` å®Œæ•´**ï¼š
   ```txt
   Flask>=3.0.0
   Flask-CORS>=4.0.0
   Flask-SQLAlchemy>=3.1.0
   psycopg2-binary>=2.9.0
   openai>=1.0.0
   # ... å…¶ä»–ä¾èµ–
   ```

2. **åœ¨ `vercel.json` æˆ–`runtime.txt` ä¸­æŒ‡å®š Python ç‰ˆæœ¬**ï¼š
   ```json
   {
     "functions": {
       "api/index.py": {
         "runtime": "python3.9"
       }
     }
   }
   ```


**å…³é”®è¦ç‚¹**ï¼š
- serverless ç¯å¢ƒæ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯æ¬¡å†·å¯åŠ¨éƒ½ä¼šé‡æ–°å®‰è£…ä¾èµ–
- å°½é‡ä½¿ç”¨ç¨³å®šçš„åŒ…ç‰ˆæœ¬èŒƒå›´ï¼ˆå¦‚ `>=3.0.0` è€Œé `==3.0.1`ï¼‰
- é¿å…åœ¨ `requirements.txt` ä¸­åŒ…å«ä¸å¿…è¦çš„å¤§å‹åŒ…ï¼ˆä¼šå¢åŠ éƒ¨ç½²æ—¶é—´å’Œå†·å¯åŠ¨å»¶è¿Ÿï¼‰

---

## 4. Flask `@before_first_request` è£…é¥°å™¨åºŸå¼ƒ

### é—®é¢˜æè¿°
åœ¨ Flask 3.0+ ç‰ˆæœ¬ä¸­ï¼Œä»£ç ä¸­ä½¿ç”¨ `@app.before_first_request` è£…é¥°å™¨å¯¼è‡´è¿è¡Œæ—¶è­¦å‘Šæˆ–é”™è¯¯ï¼š
```
DeprecationWarning: 'before_first_request' is deprecated and will be removed in Flask 3.1
```

### æ ¹æœ¬åŸå› 
- Flask 3.0 åºŸå¼ƒäº† `@before_first_request`ï¼Œæ¨èä½¿ç”¨åº”ç”¨ä¸Šä¸‹æ–‡æˆ–åœ¨åº”ç”¨å¯åŠ¨æ—¶æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘ã€‚
- serverless ç¯å¢ƒçš„"ç¬¬ä¸€æ¬¡è¯·æ±‚"æ¦‚å¿µæ¨¡ç³Šï¼ˆæ¯ä¸ªå‡½æ•°å®ä¾‹å¯èƒ½ç‹¬ç«‹å†·å¯åŠ¨ï¼‰ã€‚

### è§£å†³æ–¹æ¡ˆ

**åœ¨æ¨¡å—å¯¼å…¥æ—¶æ‰§è¡Œ**ï¼ˆé€‚åˆ serverlessï¼‰
```python
# åœ¨ src/main.py ä¸­ï¼Œapp å®ä¾‹åŒ–å
try:
    with app.app_context():
        db.create_all()
        print("Database tables created successfully.")
except Exception as e:
    print(f"Warning: db.create_all() failed: {e}")
    traceback.print_exc()
```

**å…³é”®è¦ç‚¹**ï¼š
- åœ¨ serverless ä¸­ï¼Œåº”ç”¨ä¸Šä¸‹æ–‡çš„åˆå§‹åŒ–åº”å½“åœ¨æ¨¡å—å¯¼å…¥æ—¶å®Œæˆï¼ˆè€Œéç­‰å¾…ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼‰
- ä½¿ç”¨ try/except åŒ…è£¹åˆå§‹åŒ–é€»è¾‘ï¼Œé¿å…å› æ•°æ®åº“è¿æ¥é—®é¢˜å¯¼è‡´æ•´ä¸ªæ¨¡å—å¯¼å…¥å¤±è´¥

---

## 5. æ•°æ®åº“ä»æœ¬åœ° SQLite åˆ‡æ¢åˆ°è¿œç¨‹ PostgreSQL

### é—®é¢˜æè¿°
- æœ¬åœ°å¼€å‘æ—¶ä½¿ç”¨ SQLite æ–‡ä»¶æ•°æ®åº“ï¼ˆ`database/notes.db`ï¼‰
- éƒ¨ç½²åˆ° Vercel æ—¶æŠ¥é”™ï¼š`OSError: [Errno 30] Read-only file system: '/var/task/database'`
- serverless ç¯å¢ƒçš„æ–‡ä»¶ç³»ç»Ÿæ˜¯åªè¯»çš„ï¼Œæ— æ³•åˆ›å»ºæˆ–å†™å…¥ SQLite æ–‡ä»¶

### æ ¹æœ¬åŸå› 
- Vercel serverless å‡½æ•°è¿è¡Œåœ¨ä¸´æ—¶å®¹å™¨ä¸­ï¼Œä»£ç ç›®å½•ï¼ˆ`/var/task`ï¼‰æ˜¯åªè¯»çš„
- SQLite ä¾èµ–æ–‡ä»¶ç³»ç»Ÿè¯»å†™ï¼Œä¸é€‚åˆ serverless éƒ¨ç½²
- æ¯ä¸ªå‡½æ•°è°ƒç”¨å¯èƒ½åœ¨ä¸åŒå®¹å™¨ä¸­æ‰§è¡Œï¼Œæœ¬åœ°æ–‡ä»¶ä¸å…±äº«

### è§£å†³æ–¹æ¡ˆ
1. **ä½¿ç”¨è¿œç¨‹ PostgreSQL æ•°æ®åº“**
   - é€‰æ‹©æ‰˜ç®¡æ•°æ®åº“æœåŠ¡ï¼šSupabase
   - è·å–è¿æ¥å­—ç¬¦ä¸²ï¼ˆæ ¼å¼ï¼š`postgresql://user:password@host:port/dbname`ï¼‰

2. **åœ¨ Vercel ä¸­é…ç½® `DATABASE_URL` ç¯å¢ƒå˜é‡**ï¼š
   - é¡¹ç›®è®¾ç½® â†’ Environment Variables â†’ æ·»åŠ  `DATABASE_URL`
   - å€¼ä¸ºä¸Šè¿°è¿æ¥å­—ç¬¦ä¸²

3. **ä¿®æ”¹åº”ç”¨é…ç½®ä»£ç **ï¼ˆ`src/main.py`ï¼‰ï¼š
   ```python
   import os

   # ä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡ä¸­çš„æ•°æ®åº“ URL
   database_url = os.getenv("DATABASE_URL")
   if database_url:
       # å…¼å®¹ Heroku è€æ ¼å¼
       if database_url.startswith("postgres://"):
           database_url = database_url.replace("postgres://", "postgresql://", 1)
       app.config["SQLALCHEMY_DATABASE_URI"] = database_url
       print(f"Using remote database: {database_url[:30]}...")  # åªæ‰“å°å‰ç¼€ï¼Œé¿å…æ³„éœ²å¯†ç 
   else:
       # å›é€€åˆ°å†…å­˜æ•°æ®åº“ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼Œæ•°æ®ä¸æŒä¹…ï¼‰
       print("Warning: DATABASE_URL not set; using in-memory SQLite.")
       app.config["SQLALCHEMY_DATABASE_URI"] = "sqlite:///:memory:"
   ```

**å…³é”®è¦ç‚¹**ï¼š
- SQLite ä¸é€‚åˆ serverless ç”Ÿäº§ç¯å¢ƒï¼ˆæ— æŒä¹…åŒ–ã€æ— å¹¶å‘æ”¯æŒï¼‰
- ä½¿ç”¨æ‰˜ç®¡æ•°æ®åº“å¯è·å¾—å¤‡ä»½ã€æ‰©å±•æ€§ã€è¿æ¥æ± ç­‰ä¼ä¸šçº§ç‰¹æ€§
- è¿æ¥å­—ç¬¦ä¸²åº”é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥ï¼Œä¸è¦ç¡¬ç¼–ç åœ¨ä»£ç ä¸­

---

## 6. `api/index.py` å…¥å£æ–‡ä»¶çš„æ¼”è¿›

### é—®é¢˜æè¿°
åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼Œ`api/index.py` ç»å†äº†å¤šæ¬¡è¿­ä»£ï¼Œä¸»è¦é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š
- `TypeError: issubclass() arg 1 must be a class`
- `501 Unsupported method ('GET')`
- é™æ€èµ„æºå’Œ API è¯·æ±‚æ— æ³•æ­£ç¡®è·¯ç”±

### æ ¹æœ¬åŸå› åˆ†æ
1. **`issubclass` é”™è¯¯**ï¼š
   - Vercel çš„ Python è¿è¡Œæ—¶ï¼ˆ`vc__handler__python.py`ï¼‰ä¼šæ£€æµ‹å¯¼å‡ºçš„ç¬¦å·
   - å¦‚æœå¯¼å‡ºäº†åä¸º `handler` çš„å˜é‡ä¸”è¯¥å˜é‡ä¸æ˜¯ç±»ï¼ˆæˆ–æ˜¯ä¸å…¼å®¹çš„ç±»å‹ï¼‰ï¼Œä¼šè§¦å‘ `issubclass()` æ£€æŸ¥å¤±è´¥

2. **501 é”™è¯¯**ï¼š
   - å½“è¿è¡Œæ—¶å®ä¾‹åŒ–äº†ä¸€ä¸ªç»§æ‰¿è‡ª `BaseHTTPRequestHandler` çš„ç±»ï¼Œä½†è¯¥ç±»æ²¡æœ‰å®ç° `do_GET`ã€`do_POST` ç­‰æ–¹æ³•æ—¶ï¼Œæ ‡å‡†åº“ä¼šè¿”å› `501 Unsupported method`
   - æ—©æœŸç‰ˆæœ¬çš„ `api/index.py` å¯¼å‡ºäº†å ä½ `handler` ç±»ï¼ˆåªæœ‰ `pass`ï¼‰ï¼Œå¯¼è‡´è¿è¡Œæ—¶ä½¿ç”¨è¯¥ç±»å¤„ç†è¯·æ±‚æ—¶å¤±è´¥

3. **è·¯ç”±æ··ä¹±**ï¼š
   - `api/index.py` ä¸­å®šä¹‰äº†é‡å¤çš„ Flask åº”ç”¨å®ä¾‹æˆ–è·¯ç”±
   - ä¸ `src/main.py` ä¸­çš„åº”ç”¨å®šä¹‰å†²çª

### è§£å†³æ–¹æ¡ˆæ¼”è¿›è¿‡ç¨‹

#### é˜¶æ®µ 1ï¼šåˆå§‹å°è¯•ï¼ˆå¤±è´¥ï¼‰
```python
# é—®é¢˜ï¼šå¯¼å‡ºäº† handler ç±»ä½†æœªå®ç° HTTP æ–¹æ³•
from http.server import BaseHTTPRequestHandler

class handler(BaseHTTPRequestHandler):
    pass  # âŒ ä¼šå¯¼è‡´ 501

# Vercel è¿è¡Œæ—¶å®ä¾‹åŒ– handler â†’ æ”¶åˆ° GET è¯·æ±‚ â†’ è¿”å› 501
```

#### é˜¶æ®µ 2ï¼šå®ç°ä»£ç†ç±»ï¼ˆéƒ¨åˆ†æˆåŠŸï¼‰
```python
# å°è¯•å®ç° do_GET ç­‰æ–¹æ³•ï¼Œå°†è¯·æ±‚è½¬å‘ç»™ Flask
class VercelRequestHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        # æ„é€  WSGI environ å¹¶è°ƒç”¨ app.wsgi_app
        # ä½†å®ç°å¤æ‚ä¸”å®¹æ˜“å‡ºé”™
        pass
```
é—®é¢˜ï¼šä»£ç†é€»è¾‘å¤æ‚ï¼Œå®¹æ˜“åœ¨ç¯å¢ƒå˜é‡æ„é€ ã€å“åº”å¤´å¤„ç†ç­‰ç»†èŠ‚ä¸Šå‡ºé”™ã€‚

#### é˜¶æ®µ 3ï¼šæœ€ç»ˆæ–¹æ¡ˆï¼ˆæˆåŠŸï¼‰âœ…
**å®Œå…¨ç§»é™¤ `handler` å¯¼å‡ºï¼Œåªä¿ç•™ WSGI callable**ï¼š

```python
"""Vercel adapter (minimal).

è¿™ä¸ªæ–‡ä»¶ä»…å¯¼å‡º Flask `app` å®ä¾‹å’Œä¸€ä¸ªæ˜ç¡®çš„ WSGI callable
`wsgi_handler`ã€‚è¯·ä¸è¦åœ¨æ­¤å¯¼å‡ºä»»ä½•ç»§æ‰¿è‡ª
`http.server.BaseHTTPRequestHandler` çš„ç±»æˆ–åä¸º `handler` çš„å˜é‡ã€‚
"""

import sys
import os
import traceback

# æŠŠé¡¹ç›®æ ¹ç›®å½•åŠ å…¥ sys.path
ROOT = os.path.dirname(os.path.dirname(__file__))
if ROOT not in sys.path:
    sys.path.insert(0, ROOT)

try:
    from src.main import app  # ä»ä¸»åº”ç”¨å¯¼å…¥ Flask å®ä¾‹
except Exception:
    print("ERROR importing src.main.app:")
    traceback.print_exc()
    raise
else:
    print("Imported Flask app from src.main successfully.")


def wsgi_handler(environ, start_response):
    """æ˜ç¡®çš„ WSGI å…¥å£ï¼ˆæ ‡å‡†ç­¾åï¼‰ã€‚
    
    Vercel å’Œå¤§å¤šæ•° WSGI å¹³å°éƒ½èƒ½è¯†åˆ«è¿™ç§ callableã€‚
    ç›´æ¥å°†è¯·æ±‚å§”æ‰˜ç»™ Flask çš„ wsgi_appã€‚
    """
    try:
        method = environ.get("REQUEST_METHOD", "")
        path = environ.get("PATH_INFO", "")
        print(f"wsgi_handler called: {method} {path}")
    except Exception:
        pass
    return app.wsgi_app(environ, start_response)


# ä»…å¯¼å‡ºè¿™ä¸¤ä¸ªç¬¦å·
__all__ = ["app", "wsgi_handler"]
```

### å…³é”®è¦ç‚¹æ€»ç»“
- **ä¸è¦å¯¼å‡º `handler` ç±»**ï¼šé™¤éä½ èƒ½ç¡®ä¿å®Œæ•´å®ç°æ‰€æœ‰ HTTP æ–¹æ³•ä¸”ä¸è¿è¡Œæ—¶å…¼å®¹
- **ä¼˜å…ˆä½¿ç”¨ WSGI callable**ï¼š`wsgi_handler(environ, start_response)` æˆ–ç›´æ¥å¯¼å‡º Flask çš„ `app` å®ä¾‹
- **ä¿æŒ `api/index.py` ç²¾ç®€**ï¼šä»…ä½œä¸ºé€‚é…å±‚ï¼Œæ‰€æœ‰ä¸šåŠ¡é€»è¾‘åœ¨ `src/main.py`
- **å¢åŠ è°ƒè¯•æ—¥å¿—**ï¼šåœ¨å¯¼å…¥æ—¶å’Œè¯·æ±‚å¤„ç†æ—¶æ‰“å°å…³é”®ä¿¡æ¯ï¼Œä¾¿äºåœ¨ Vercel æ—¥å¿—ä¸­è¿½è¸ªé—®é¢˜

---

## 7. OpenAI ä¾èµ–ç¼ºå¤±é—®é¢˜

### é—®é¢˜æè¿°
è°ƒç”¨ `/api/notes/extract-info` æ¥å£æ—¶è¿”å› 500 é”™è¯¯ï¼Œæ—¥å¿—æ˜¾ç¤ºï¼š
```
ModuleNotFoundError: No module named 'openai'
```

### æ ¹æœ¬åŸå› 
- ä»£ç ä¸­ `src/services/ai_service.py` ä½¿ç”¨äº† `from openai import OpenAI`
- ä½† `requirements.txt` ä¸­æœªåŒ…å« `openai` åŒ…
- Vercel éƒ¨ç½²æ—¶ä¸ä¼šå®‰è£…è¯¥ä¾èµ–ï¼Œè¿è¡Œæ—¶å¯¼å…¥å¤±è´¥

### è§£å†³æ–¹æ¡ˆ
1. **åœ¨ `requirements.txt` ä¸­æ·»åŠ ä¾èµ–**ï¼š
   ```txt
   openai>=1.0.0
   ```

2. **ä¿®æ”¹ AI æœåŠ¡ä»£ç ä»¥ä¼˜é›…å¤„ç†ç¼ºå¤±ä¾èµ–**ï¼ˆ`src/services/ai_service.py`ï¼‰ï¼š
   ```python
   # å»¶è¿Ÿå¯¼å…¥ï¼Œæ•è· ImportError
   try:
       from openai import OpenAI
       _OPENAI_AVAILABLE = True
   except ImportError:
       _OPENAI_AVAILABLE = False
       OpenAI = None  # type: ignore

   class GitHubAIService:
       def __init__(self):
           if not _OPENAI_AVAILABLE:
               raise ValueError(
                   "OpenAI package not installed. "
                   "Please add 'openai>=1.0.0' to requirements.txt "
                   "or install it via: pip install openai"
               )
           # ... åˆå§‹åŒ–é€»è¾‘
   ```

3. **åœ¨è·¯ç”±ä¸­æ•è·åˆå§‹åŒ–é”™è¯¯**ï¼ˆ`src/routes/note.py`ï¼‰ï¼š
   ```python
   from src.services.ai_service import extract_key_info

   @note_bp.route('/notes/extract-info', methods=['POST'])
   def extract_information():
       try:
           data = request.get_json()
           content = data.get('content', '')
           if not content:
               return jsonify({'error': 'Content is required'}), 400
           
           # è°ƒç”¨ AI æœåŠ¡
           extracted = extract_key_info(content)
           return jsonify({'extracted_info': extracted})
       except ValueError as e:
           # æ•è·ä¾èµ–ç¼ºå¤±æˆ–é…ç½®é”™è¯¯
           print(f"AI service error: {e}")
           return jsonify({'error': str(e)}), 503
       except Exception as e:
           print(f"Exception in /api/notes/extract-info: {e}")
           traceback.print_exc()
           return jsonify({'error': 'Internal server error'}), 500
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**ï¼ˆå¦‚éœ€ä½¿ç”¨ GitHub Models APIï¼‰ï¼š
   - åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ  `GITHUB_TOKEN`
   - å€¼ä¸ºä½ çš„ GitHub Personal Access Tokenï¼ˆéœ€è¦æ¨¡å‹è®¿é—®æƒé™ï¼‰

5. **æœ¬åœ°å®‰è£…ä¾èµ–**ï¼š
   ```powershell
   pip install openai
   ```

### å…³é”®è¦ç‚¹
- æ‰€æœ‰è¿è¡Œæ—¶ä¾èµ–å¿…é¡»åœ¨ `requirements.txt` ä¸­å£°æ˜
- å¯¹äºå¯é€‰åŠŸèƒ½çš„ä¾èµ–ï¼Œä½¿ç”¨ try/except ä¼˜é›…å¤„ç†ç¼ºå¤±æƒ…å†µ
- è¿”å›æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯ï¼ˆ503 Service Unavailable + é…ç½®æç¤ºï¼‰è€Œé 500 Internal Error
- åœ¨ Vercel æ—¥å¿—ä¸­æ‰“å° tracebackï¼Œä¾¿äºå¿«é€Ÿå®šä½é—®é¢˜

---

## æ€»ç»“ä¸æœ€ä½³å®è·µ

### æ ¸å¿ƒç»éªŒ
1. **Vercel é…ç½®**ï¼š
   - è·¯ç”±é¡ºåºå¾ˆé‡è¦ï¼ˆé™æ€ â†’ API â†’ å›é€€ï¼‰
   - åœ¨ `functions` ä¸­æ˜ç¡®å£°æ˜ serverless å‡½æ•°é…ç½®
   - ç¯å¢ƒå˜é‡å¿…é¡»åœ¨é¡¹ç›®è®¾ç½®ä¸­ä¸ºæ¯ä¸ªç¯å¢ƒå•ç‹¬é…ç½®

2. **æ•°æ®åº“é€‰æ‹©**ï¼š
   - serverless ç¯å¢ƒå¿…é¡»ä½¿ç”¨è¿œç¨‹æ•°æ®åº“ï¼ˆPostgreSQLã€MySQL ç­‰ï¼‰
   - é€šè¿‡ `DATABASE_URL` ç¯å¢ƒå˜é‡æ³¨å…¥è¿æ¥å­—ç¬¦ä¸²
   - é¿å…åœ¨åªè¯»æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºæœ¬åœ°æ•°æ®åº“æ–‡ä»¶

3. **å…¥å£æ–‡ä»¶è®¾è®¡**ï¼š
   - `api/index.py` åº”å½“æ˜¯è½»é‡é€‚é…å™¨ï¼Œä»…è´Ÿè´£å¯¼å…¥å’Œå¯¼å‡º
   - ä¼˜å…ˆå¯¼å‡º WSGI callableï¼ˆ`app` æˆ– `wsgi_handler`ï¼‰
   - é¿å…å¯¼å‡ºæœªå®Œæ•´å®ç°çš„ `handler` ç±»

4. **ä¾èµ–ç®¡ç†**ï¼š
   - `requirements.txt` å¿…é¡»åŒ…å«æ‰€æœ‰è¿è¡Œæ—¶ä¾èµ–
   - å¯¹å¯é€‰ä¾èµ–åšé˜²å¾¡æ€§æ£€æŸ¥ï¼Œè¿”å›å‹å¥½é”™è¯¯
   - æœ¬åœ°å¼€å‘ä¸ç”Ÿäº§éƒ¨ç½²ä½¿ç”¨ç›¸åŒçš„ä¾èµ–åˆ—è¡¨

5. **è°ƒè¯•æŠ€å·§**ï¼š
   - åœ¨å…³é”®è·¯å¾„å¢åŠ  `print()` æˆ–æ—¥å¿—è®°å½•
   - ä½¿ç”¨ `traceback.print_exc()` æ•è·å®Œæ•´é”™è¯¯å †æ ˆ
   - å–„ç”¨ `vercel logs` å’Œ `vercel dev` æœ¬åœ°æ¨¡æ‹Ÿ

### æ¨èå·¥ä½œæµ
```powershell
# 1. æœ¬åœ°å¼€å‘
$env:DATABASE_URL = "postgresql://..."
python src/main.py

# 2. æœ¬åœ°æ¨¡æ‹Ÿ Vercel ç¯å¢ƒ
vercel dev

# 3. éƒ¨ç½²åˆ°é¢„è§ˆç¯å¢ƒ
vercel

# 4. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
vercel --prod

# 5. æŸ¥çœ‹æ—¥å¿—
vercel logs <deployment-url> --since 1h
```

### å¸¸è§é”™è¯¯å¿«é€Ÿè¯Šæ–­è¡¨

| é”™è¯¯ä¿¡æ¯ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|---------|---------|
| `TypeError: issubclass() arg 1 must be a class` | å¯¼å‡ºäº†éç±»å¯¹è±¡ä½œä¸º `handler` | ç§»é™¤ `handler` å¯¼å‡ºï¼Œåªä¿ç•™ `app`/`wsgi_handler` |
| `501 Unsupported method` | `handler` ç±»æœªå®ç° HTTP æ–¹æ³• | ç§»é™¤ `handler` æˆ–å®ç°å®Œæ•´çš„ä»£ç†é€»è¾‘ |
| `OSError: Read-only file system` | å°è¯•å†™å…¥ serverless å®¹å™¨çš„åªè¯»ç›®å½• | ä½¿ç”¨è¿œç¨‹æ•°æ®åº“ï¼Œç§»é™¤æœ¬åœ°æ–‡ä»¶å†™å…¥ |
| `No module named 'xxx'` | `requirements.txt` ç¼ºå°‘ä¾èµ– | æ·»åŠ ç¼ºå¤±çš„åŒ…åˆ° `requirements.txt` |
| `DATABASE_URL not set` | ç¯å¢ƒå˜é‡æœªé…ç½® | åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ |
| `DeprecationWarning: before_first_request` | ä½¿ç”¨äº† Flask 3.0 åºŸå¼ƒçš„è£…é¥°å™¨ | æ”¹ç”¨ `with app.app_context()` åˆå§‹åŒ– |
| `psycopg2.OperationalError` | PostgreSQL è¿æ¥å¤±è´¥ | æ£€æŸ¥ `DATABASE_URL` æ ¼å¼å’Œæ•°æ®åº“å¯è®¿é—®æ€§ |

### éƒ¨ç½²æ£€æŸ¥æ¸…å•
- [ ] `requirements.txt` åŒ…å«æ‰€æœ‰è¿è¡Œæ—¶ä¾èµ–
- [ ] `vercel.json` è·¯ç”±é…ç½®æ­£ç¡®ï¼ˆé™æ€ â†’ API â†’ å›é€€ï¼‰
- [ ] ç¯å¢ƒå˜é‡å·²åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­é…ç½®ï¼ˆProduction/Previewï¼‰
- [ ] `api/index.py` åªå¯¼å‡º `app` å’Œ `wsgi_handler`
- [ ] æ•°æ®åº“ä½¿ç”¨è¿œç¨‹ PostgreSQLï¼ˆé€šè¿‡ `DATABASE_URL`ï¼‰
- [ ] ç§»é™¤äº† `@before_first_request` ç­‰åºŸå¼ƒè£…é¥°å™¨
- [ ] ä»£ç ä¸­æ— ç¡¬ç¼–ç çš„æ•æ„Ÿä¿¡æ¯
- [ ] æœ¬åœ° `vercel dev` æµ‹è¯•é€šè¿‡
- [ ] éƒ¨ç½²åæ£€æŸ¥ Vercel æ—¥å¿—ç¡®è®¤æ— é”™è¯¯

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼š1.0  
**æœ€åæ›´æ–°**ï¼š2025-10-15  
**ç»´æŠ¤è€…**ï¼šcelvelzel  
**é¡¹ç›®ä»“åº“**ï¼š[note-taking-app-celvelzel](https://github.com/celvelzel/note-taking-app-celvelzel)
